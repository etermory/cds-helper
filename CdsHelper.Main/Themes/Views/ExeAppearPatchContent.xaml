<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:views="clr-namespace:CdsHelper.Main.UI.Views"
                    xmlns:units="clr-namespace:CdsHelper.Support.UI.Units;assembly=CdsHelper.Support">

    <Style TargetType="{x:Type views:ExeAppearPatchContent}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type views:ExeAppearPatchContent}">
                    <Grid Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!-- 헤더 -->
                        <StackPanel Grid.Row="0" Margin="0,0,0,10">
                            <TextBlock Text="대항해시대2 인물 등장 패치 (CDS_95.EXE)" FontSize="18" FontWeight="Bold" Margin="0,0,0,5"/>
                            <TextBlock Text="이벤트 전용 캐릭터(도냐 마리나, 미켈란젤로)를 일반 등장으로 변경합니다" Foreground="Gray"/>
                        </StackPanel>

                        <!-- 파일 경로 및 버튼 -->
                        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,10">
                            <TextBlock Text="파일: " VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding ExeFilePath}" VerticalAlignment="Center" Foreground="#1976D2" Margin="0,0,20,0"/>
                            <Button Content="새로고침" Command="{Binding RefreshCommand}"
                                    Width="80" Height="28" Margin="0,0,10,0"/>
                            <Button Content="패치 적용" Command="{Binding ApplyPatchCommand}"
                                    Width="100" Height="28" Margin="0,0,10,0"
                                    Background="#4CAF50" Foreground="White" BorderThickness="0"/>
                            <Button Content="원본 복원" Command="{Binding RestoreOriginalCommand}"
                                    Width="100" Height="28"
                                    Background="#FF9800" Foreground="White" BorderThickness="0"/>
                        </StackPanel>

                        <!-- 데이터 그리드 -->
                        <units:CdsDataGrid Grid.Row="2"
                                          ItemsSource="{Binding PatchItems}"
                                          AutoGenerateColumns="False"
                                          IsReadOnly="True">
                            <units:CdsDataGrid.RowStyle>
                                <Style TargetType="DataGridRow" BasedOn="{StaticResource {x:Type DataGridRow}}">
                                    <Setter Property="Background" Value="White"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsPatched}" Value="True">
                                            <Setter Property="Background" Value="#E8F5E9" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding IsPatched}" Value="False">
                                            <Setter Property="Background" Value="#FFF3E0" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </units:CdsDataGrid.RowStyle>
                            <units:CdsDataGrid.Columns>
                                <DataGridTextColumn Header="#" Binding="{Binding Index}" Width="40" />
                                <DataGridTextColumn Header="주소" Binding="{Binding Address}" Width="110">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="FontFamily" Value="Consolas"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Header="설명" Binding="{Binding Description}" Width="220" />
                                <DataGridTextColumn Header="현재 값" Binding="{Binding CurrentHex}" Width="180">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="FontFamily" Value="Consolas"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Header="원본 값" Binding="{Binding OriginalHex}" Width="180">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="FontFamily" Value="Consolas"/>
                                            <Setter Property="Foreground" Value="Gray"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Header="패치 값" Binding="{Binding PatchedHex}" Width="180">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="FontFamily" Value="Consolas"/>
                                            <Setter Property="Foreground" Value="Gray"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Header="상태" Binding="{Binding Status}" Width="70">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="FontWeight" Value="Bold"/>
                                            <Setter Property="TextAlignment" Value="Center"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsPatched}" Value="True">
                                                    <Setter Property="Foreground" Value="#2E7D32" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding IsPatched}" Value="False">
                                                    <Setter Property="Foreground" Value="#E65100" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                            </units:CdsDataGrid.Columns>
                        </units:CdsDataGrid>

                        <!-- 장기휴양 기간 설정 -->
                        <Border Grid.Row="3" Background="#F5F5F5" CornerRadius="4" Padding="10,8" Margin="0,10,0,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="장기휴양 기간 제한:" VerticalAlignment="Center" FontWeight="Bold" Margin="0,0,10,0"/>
                                <TextBox Text="{Binding LongRestLimit, UpdateSourceTrigger=PropertyChanged}"
                                         Width="50" Height="26" VerticalContentAlignment="Center"
                                         TextAlignment="Center" Margin="0,0,5,0"/>
                                <TextBlock Text="개월" VerticalAlignment="Center" Margin="0,0,15,0"/>
                                <Button Content="적용" Command="{Binding SaveLongRestLimitCommand}"
                                        Width="60" Height="26" Margin="0,0,5,0"
                                        Background="#4CAF50" Foreground="White" BorderThickness="0"/>
                                <Button Content="원본(12)" Command="{Binding RestoreLongRestLimitCommand}"
                                        Width="80" Height="26"
                                        Background="#FF9800" Foreground="White" BorderThickness="0"/>
                                <TextBlock Text="(기본 12개월, 1~127)" VerticalAlignment="Center" Foreground="Gray" Margin="10,0,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- 상태 바 -->
                        <Border Grid.Row="4" Background="#F5F5F5" Padding="10,5" Margin="0,10,0,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding StatusText}" />
                                <TextBlock Text=" | " Foreground="Gray" Margin="10,0"/>
                                <TextBlock Text="패치됨: "/>
                                <TextBlock Text="{Binding PatchedCount}" FontWeight="Bold" Foreground="#4CAF50"/>
                                <TextBlock Text=" / "/>
                                <TextBlock Text="{Binding PatchItems.Count}"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
