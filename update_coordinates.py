#!/usr/bin/env python3
# -*- coding: utf-8 -*-
import json
import re

# 좌표 매핑 (도시명: (위도, 경도))
coordinates = {
    "리스본": (38, -9),
    "오포르트": (41, -8),
    "라코루냐": (43, -8),
    "빌바오": (43, -3),
    "톨레도": (40, -4),
    "사라고사": (41, -1),
    "코르도바": (38, -5),
    "세빌리아": (37, -6),
    "카디스": (36, -6),
    "말라가": (36, -4),
    "그라나다": (37, -3),
    "발렌시아": (39, 0),
    "바르셀로나": (39, 2),
    "마요르카": (41, 2),
    "파리": (48, 2),
    "루앙": (49, 0),
    "투르": (47, 0),
    "낭트": (47, -2),
    "보르도": (45, 1),
    "툴루즈": (43, 1),
    "리옹": (45, 4),
    "마르세유": (43, 5),
    "브뤼즈": (51, 3),
    "엔트워프": (52, 4),
    "암스테르담": (52, 4),
    "브뤼셀": (50, 4),
    "밀라노": (45, 9),
    "토리노": (45, 8),
    "제노바": (44, 8),
    "베니스": (45, 12),
    "피렌체": (43, 11),
    "피사": (43, 10),
    "안코나": (43, 13),
    "로마": (42, 11),
    "나폴리": (41, 14),
    "칼리아스": (39, 9),
    "팔레르모": (38, 13),
    "시라쿠사": (37, 15),
    "런던": (50, 0),
    "사우셈프턴": (51, -1),
    "브리스틀": (51, -3),
    "요크": (54, -1),
    "에든버러": (56, -2),
    "더블린": (53, -6),
    "함부르크": (53, 9),
    "뤼베크": (54, 10),
    "브레멘": (53, 8),
    "쾰른": (51, 6),
    "프랑크푸르트": (50, 7),
    "스트라스부르크": (48, 6),
    "마그데부르크": (52, 11),
    "뉘른베르크": (49, 10),
    "아우크스부르크": (48, 10),
    "프라하": (49, 14),
    "비엔나": (47, 16),
    "베른": (46, 7),
    "단치히": (54, 18),
    "쾨니히스베르크": (54, 19),
    "리가": (57, 23),
    "노브고르트": (58, 31),
    "모스크바": (56, 36),
    "키에프": (50, 30),
    "바르샤바": (52, 20),
    "부다페스트": (47, 18),
    "스톡홀롬": (59, 18),
    "비즈비": (57, 18),
    "코펜하겐": (55, 12),
    "오슬로": (59, 10),
    "베르겐": (60, 4),
    "베오그라드": (44, 20),
    "부쿠레슈티": (45, 20),
    "라구사": (42, 17),
    "아테네": (38, 23),
    "살로니카": (40, 23),
    "간디아": (35, 25),
    "파마가스타": (35, 33),
    "바르나": (42, 29),
    "몬카스트로": (44, 30),
    "알렉산드리아": (31, 30),
    "카이로": (30, 30),
    "아스완": (24, 32),
    "트리폴리": (32, 13),
    "튀니스": (27, 10),
    "알제": (37, 4),
    "카사블랑카": (33, 8),
    "세우타": (35, 5),
    "아조레스": (38, -28),
    "마디라": (32, -16),
    "라스팔마스": (28, -15),
    "아르킨": (27, -13),
    "베르덴곶": (14, -17),
    "시에라리온": (8, -13),
    "타가자": (26, -3),
    "톰북투": (19, -1),
    "가오": (17, -3),
    "젠네": (15, -4),
    "가노": (14, -14),
    "산호르해": (5, 0),
    "아페": (6, -3),
    "산토메": (0, 6),
    "르완다": (-8, 13),
    "케이프": (-33, 18),
    "소팔라": (-19, 34),
    "모잠비크": (-15, 40),
    "짐바브웨": (-18, 29),
    "킬와": (-8, 39),
    "잔지바르": (-7, 39),
    "몸바사": (-4, 39),
    "말린디": (-2, 40),
    "모가디슈": (2, 44),
    "악숨": (8, 38),
    "하트툼": (15, 33),
    "이스탄불": (41, 29),
    "카파": (42, 35),
    "타나": (44, 38),
    "시높": (39, 34),
    "트레비존드": (38, 38),
    "앙골라": (38, 32),
    "안티오키아": (36, 35),
    "다마스쿠스": (32, 34),
    "예루살렘": (32, 34),
    "베이루트": (34, 35),
    "메디아": (24, 39),
    "메카": (21, 39),
    "아덴": (13, 45),
    "무스카트": (23, 58),
    "바스라": (30, 48),
    "바그다드": (32, 44),
    "호르무즈": (27, 56),
    "시라즈": (29, 52),
    "이스파한": (32, 51),
    "타브리즈": (37, 43),
    "사마르칸트": (39, 66),
    "타슈겐트": (41, 69),
    "우르겐치": (41, 58),
    "헤라트": (34, 63),
    "카불": (34, 69),
    "카슈가르": (39, 77),
    "투르판": (44, 88),
    "라사": (32, 90),
    "아스트라한": (44, 4),
    "카잔": (56, 44),
    "사빌": (57, 72),
    "호브드": (49, 90),
    "카라코룸": (49, 100),
    "델리": (28, 77),
    "라호르": (31, 73),
    "아마다바드": (23, 72),
    "디우": (21, 70),
    "비자푸르": (16, 75),
    "고아": (15, 73),
    "카나놀": (12, 75),
    "캘리컷": (11, 75),
    "비자야나가르": (15, 76),
    "코친": (10, 76),
    "콜롬보": (7, 79),
    "골콘다": (17, 78),
    "캘커타": (21, 88),
    "아바": None,  # 좌표 없음
    "페구": None,  # 좌표 없음
    "말라카": None,  # 좌표 없음
    "리콜": None,  # 좌표 없음
    "아유타야": None,  # 좌표 없음
    "프놈펜": None,  # 좌표 없음
    "유에": None,  # 좌표 없음
    "교도": None,  # 좌표 없음
    "아친": (-5, 95),
    "파렌바": (-2, 104),
    "반탐": (-5, 105),
    "수라바야": (-7, 112),
    "브루나이": (-5, 114),
    "테르나테": (0, 127),
    "암보이나": (-3, 127),
    "오문": (22, 113),
    "광주": (22, 113),
    "천주": (25, 118),
    "복주": (26, 119),
    "함주": None,  # 좌표 없음
    "남경": (31, 121),
    "무창": (30, 113),
    "계림": (25, 109),
    "운남": (24, 102),
    "성도": (29, 103),
    "감주": (39, 98),
    "서안": (33, 109),
    "개봉": (34, 114),
    "제남": (37, 117),
    "태원": (38, 112),
    "북경": (40, 116),
    "요동": (41, 121),
    "한양": (37, 126),
    "나가사키": (32, 129),
    "사카이": (34, 135),
    "쿄토": (34, 135),
    "산토도밍고": (18, -69),
    "산티아고": (20, -76),
    "아바나": (23, -82),
    "자메이카": (18, -77),
    "산후안": (18, -66),
    "베라클루즈": (19, -96),
    "테노치티클란": (20, -101),
    "멕시코": (20, -101),
    "투라스칼라": (19, -98),
    "트라파": (18, -98),
    "미틀라": (17, -95),
    "아카풀코": (17, -100),
    "메리다": (21, -88),
    "과테말라": (14, -90),
    "투르히요": (15, -86),
    "레온": (11, -85),
    "파나마": (9, -79),
    "산타마르타": (11, -75),
    "코로": (11, -70),
    "쿠마나": (10, -64),
    "페르남부쿠": (-7, -34),
    "바이앙": (-12, -38),
    "리우데자네이루": (-23, -44),
    "부에노스아이레스": (-34, -58),
    "보고타": (-5, -73),
    "키토": (0, -78),
    "툼베스": (-3, -80),
    "찬찬": (-6, -80),
    "리마": (-12, -77),
    "쿠스코": (-13, -71),
    "나스카": (-15, -75),
    "포토시": (-19, -65),
}

# cities.json 읽기
with open('cds-helper/cities.json', 'r', encoding='utf-8') as f:
    cities = json.load(f)

# 좌표 추가
for city in cities:
    city_name = city['name']
    if city_name in coordinates and coordinates[city_name] is not None:
        lat, lon = coordinates[city_name]
        city['latitude'] = lat
        city['longitude'] = lon

# cities.json에 저장
with open('cds-helper/cities.json', 'w', encoding='utf-8') as f:
    json.dump(cities, f, ensure_ascii=False, indent=2)

print(f"Updated {sum(1 for c in cities if 'latitude' in c and c['latitude'] is not None)} cities with coordinates!")
